<!DOCTYPE html>
<html lang="en">
<head>
	<title>Lofi</title>
	<meta name="title" content="Pizza Emoji - A small pictorial symbol that represents a slice of delicious baked dough with tomato sauce, cheese, and various toppings." />
	<meta name="description" content="The best website named Pizza Emoji" />
	<meta name="keywords" content="pizza emoji, pizzaemoji.net, slice, lofi" />
	<meta name="author" content="Brandon Butler" />
	<meta name="pronouns" content="he/him" />
	<meta name="theme-color" content="#222222" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta name='robots' content='max-image-preview:large' />
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta charset="UTF-8" />
	<link rel="apple-touch-icon" sizes="180x180" href="/favicon/lofi-apple-touch-icon.png">
	<link rel="shortcut icon" type="image/x-icon" href="/favicon/lofi-favicon.ico">
	<link rel="icon" type="image/x-icon" sizes="48x48" href="/favicon/lofi-favicon.ico">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
	<link rel="manifest" href="/favicon/site.webmanifest">
	<style>
    body {
		background: #222222;
		width: 100%;
		height: 100vh;
		margin: 0;
    }
	#centered {
		display: flex;
	    flex-direction: column;
		align-items: center;
		justify-content: center;
		width: 100%;
		height: 80%;
	}
	#wrapper {
		position: relative;
		width: 300px;
		height: 300px;
	/* wrapper must exceed button size */
	}
	#player {
		width: 200px;
		height: 200px;
	}
	#mask {
		position: absolute;
		inset: 0;     
		background: #222222;
	}
	#big-btn {
		position: absolute;
		width: 12rem;
		height: 12rem;
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);
		background: #BBBBBB;
		border: none;
		color: #D44E52;
		font-size: 10rem;
		border-radius: 50%;
		display: flex;
		align-items: center;
		justify-content: center;
		padding: 0;
		margin: 0;
		z-index: 100;
	}
	.chan-btn {
		position: relative;
		background: none;
		border: none;
		padding: 0;
	}
	.chan-btn.active::after {
		content: '';
		display: block;
		position :absolute;
		left: 20%; 
		right: 20%;
		bottom: -6px; /* a little gap below the img */
		height: 3px;
		background: #D44E52;
		border-radius: 2px;
}
	.chan-btn img {
		width: 80px;
		height: 80px;
		display: block;
	}
	</style>
</head>
<body>
<div id="centered">
	<div id="wrapper">
		<div id="player"></div>
		<div id="mask"></div>
		<button id="big-btn">&#9654;</button>
	</div>
	<br>
	<div>

		<button class="chan-btn active" id="btn-girl">
		<img src="lofi-girl.webp" alt="Lofi Girl">
		</button>
		<button class="chan-btn" id="btn-boy">
		<img src="lofi-boy.webp" alt="Lofi Boy">
		</button>
	</div>
</div>
<script src="https://www.youtube.com/iframe_api"></script>
<script>
	var playerReady = false;

	function onYouTubeIframeAPIReady () {
		window.player = new YT.Player("player", {
			videoId: "jfKfPfyJRdk",
			host:    "https://www.youtube-nocookie.com",
			height: 200, width: 200,
			playerVars: { playsinline: 1, mute: 0 },
				events: {
			onReady: () => (playerReady = true),
			onStateChange
				}
			});
		}

	const btn = document.getElementById("big-btn");

	btn.addEventListener("click", () => {
		if (!playerReady) return;
		const state = player.getPlayerState();
		if (state === YT.PlayerState.PLAYING) {
			player.pauseVideo();
		} else {
			player.playVideo();
		}
	});

	function onStateChange (e) {
		btn.textContent =
		e.data === YT.PlayerState.PLAYING ? "\u23F8\uFE0E" : "\u25B6"; //Pause : Play 
	}

    function switchChannel(id){
        if(!playerReady) return;
        player.loadVideoById(id);          // swap stream
        // try to autoplay; some browsers (iOS Safari) may block it
        player.playVideo();
    }
    document.getElementById("btn-girl")
            .addEventListener("click",()=>switchChannel("jfKfPfyJRdk"));
    document.getElementById("btn-boy")
            .addEventListener("click",()=>switchChannel("4xDzrJKXOOY"));

const chanBtns = document.querySelectorAll('.chan-btn');

function switchChannel(id, btn){
    if(!playerReady) return;
    player.loadVideoById(id);
    player.playVideo();                   // ignored on iOS if autoplay blocked

    /* add .active to the clicked button, remove from the others */
    chanBtns.forEach(b => b.classList.toggle('active', b === btn));
}

document.getElementById('btn-girl')
        .addEventListener('click', function(){ switchChannel('jfKfPfyJRdk', this); });

document.getElementById('btn-boy')
        .addEventListener('click', function(){ switchChannel('4xDzrJKXOOY', this); });

	/* iOS Shortcut helper */
	function playLofi () {
	if (playerReady) player.playVideo();
	}
	window.playLofi = playLofi;
</script>
</body>
</html>